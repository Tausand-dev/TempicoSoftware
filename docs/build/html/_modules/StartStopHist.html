

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>StartStopHist &mdash; Tempico Software 1.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=def9ab29"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Tempico Software
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../LifeTimeGraphics.html">LifeTimeGraphics module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../StartStopHist.html">StartStopHist module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aboutDialog.html">aboutDialog module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CountsEstimatedGraphics.html">CountsEstimatedGraphics module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../createsavefile.html">createsavefile module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../findDevices.html">findDevices module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../generalsettings.html">generalsettings module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main.html">main module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Tempico Software</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">StartStopHist</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for StartStopHist</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">PySide2.QtCore</span> <span class="kn">import</span> <span class="n">QTimer</span><span class="p">,</span> <span class="n">QMetaObject</span><span class="p">,</span> <span class="n">QThread</span><span class="p">,</span> <span class="n">Signal</span><span class="p">,</span> <span class="n">Slot</span><span class="p">,</span> <span class="n">Qt</span>
<span class="kn">from</span> <span class="nn">PySide2.QtGui</span> <span class="kn">import</span> <span class="n">QPixmap</span><span class="p">,</span> <span class="n">QPainter</span><span class="p">,</span> <span class="n">QColor</span>
<span class="kn">from</span> <span class="nn">PySide2.QtWidgets</span> <span class="kn">import</span> <span class="n">QMessageBox</span><span class="p">,</span> <span class="n">QDialog</span><span class="p">,</span> <span class="n">QVBoxLayout</span><span class="p">,</span> <span class="n">QLabel</span><span class="p">,</span> <span class="n">QComboBox</span><span class="p">,</span> <span class="n">QPushButton</span><span class="p">,</span> <span class="n">QGridLayout</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">histogram</span><span class="p">,</span> <span class="n">linspace</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">pyqtgraph</span> <span class="k">as</span> <span class="nn">pg</span>
<span class="kn">from</span> <span class="nn">PySide2.QtCore</span> <span class="kn">import</span> <span class="n">QTimer</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="c1">#To do eliminate import</span>
<span class="kn">from</span> <span class="nn">createsavefile</span> <span class="kn">import</span> <span class="n">createsavefile</span> <span class="k">as</span> <span class="n">savefile</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1">#Create graphic design#</span>
<div class="viewcode-block" id="StartStopLogic"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic">[docs]</a><span class="k">class</span> <span class="nc">StartStopLogic</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class handles the functionality for managing buttons, checkboxes, and graphs for histograms related to the Start-Stop measurements. </span>
<span class="sd">    It controls which channels are active, manages the display of histograms, and records the data from the Tempico device based on the user&#39;s interactions. </span>
<span class="sd">    It also handles the zooming feature for creating bars according to the time range received from the device.</span>

<span class="sd">    :param parent: The parent QWindow for the logic.</span>
<span class="sd">    :param disconnect: The QPushButton used to disconnect.</span>
<span class="sd">    :param device: The Tempico device class that handles the measurements.</span>
<span class="sd">    :param check1, check2, check3, check4: QCheckBoxes that control the visibility of each histogram.</span>
<span class="sd">    :param startbutton, stopbutton: QPushButtons to start and stop the measurement process.</span>
<span class="sd">    :param savebutton, save_graph_1: QPushButtons to save data and save the graph.</span>
<span class="sd">    :param clear_channel_A, clear_channel_B, clear_channel_C, clear_channel_D: QPushButtons to clear data for each respective channel.</span>
<span class="sd">    :param connect: QPushButton to connect to the Tempico device.</span>
<span class="sd">    :param mainWindow: The main window (QWindow) for the GUI.</span>
<span class="sd">    :param statusValue, statusPoint: QLabel widgets for displaying status information (e.g., values and points).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">disconnect</span><span class="p">,</span><span class="n">device</span><span class="p">,</span><span class="n">check1</span><span class="p">,</span><span class="n">check2</span><span class="p">,</span><span class="n">check3</span><span class="p">,</span><span class="n">check4</span><span class="p">,</span><span class="n">startbutton</span><span class="p">,</span><span class="n">stopbutton</span><span class="p">,</span><span class="n">savebutton</span><span class="p">,</span><span class="n">save_graph_1</span><span class="p">,</span><span class="n">clear_channel_A</span><span class="p">,</span><span class="n">clear_channel_B</span><span class="p">,</span><span class="n">clear_channel_C</span><span class="p">,</span><span class="n">clear_channel_D</span><span class="p">,</span><span class="n">connect</span><span class="p">,</span><span class="n">mainWindow</span><span class="p">,</span><span class="n">statusValue</span><span class="p">,</span><span class="n">statusPoint</span><span class="p">,</span><span class="n">timerStatus</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">savefile</span><span class="o">=</span><span class="n">savefile</span><span class="p">()</span>
        <span class="c1">#timer to manage disconnection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timerConnection</span><span class="o">=</span><span class="n">timerStatus</span>
        <span class="c1">#Disconnect button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disconnectButton</span><span class="o">=</span> <span class="n">disconnect</span>
        <span class="c1">#Connect button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connectButton</span><span class="o">=</span> <span class="n">connect</span>
        <span class="c1">##----------------##</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startbutton</span><span class="o">=</span><span class="n">startbutton</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopbutton</span><span class="o">=</span><span class="n">stopbutton</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">savebutton</span><span class="o">=</span><span class="n">savebutton</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_graphs</span><span class="o">=</span><span class="n">save_graph_1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_A</span><span class="o">=</span><span class="n">clear_channel_A</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_B</span><span class="o">=</span><span class="n">clear_channel_B</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_C</span><span class="o">=</span><span class="n">clear_channel_C</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_D</span><span class="o">=</span><span class="n">clear_channel_D</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_A</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clear_a</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_B</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clear_b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_C</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clear_c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_D</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clear_d</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">savebutton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_graphic</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_graphs</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_plots</span><span class="p">)</span>
        <span class="c1">#Disable buttons init</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startbutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">savebutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopbutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_graphs</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_A</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_B</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_C</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_D</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkA</span><span class="o">=</span><span class="n">check1</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">checkB</span><span class="o">=</span><span class="n">check2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkC</span><span class="o">=</span><span class="n">check3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkD</span><span class="o">=</span><span class="n">check4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkA</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkB</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkC</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkD</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveA</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveB</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveC</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveD</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">withoutMeasurement</span><span class="o">=</span><span class="kc">False</span>

        <span class="c1">##---------------------------------##</span>
        <span class="c1">##---------------------------------##</span>
        <span class="c1">##-------Begin graphic layout------##</span>
        <span class="c1">##---------------------------------##</span>
        <span class="c1">##---------------------------------##</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">=</span><span class="n">mainWindow</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">=</span><span class="n">QGridLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startbutton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_graphic</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopbutton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop_graphic</span><span class="p">)</span>
        
        <span class="c1">#Get the channels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">=</span><span class="n">device</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel3</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel4</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch4</span>
        <span class="c1">##---------------------------------##</span>
        <span class="c1">##---------------------------------##</span>
        <span class="c1">##------Begin the historam data----##</span>
        <span class="c1">##---------------------------------##</span>
        <span class="c1">##---------------------------------##</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataA</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">histA</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">binsA</span><span class="o">=</span><span class="n">histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataA</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
        <span class="c1">#Creating the histogram plot channel B</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataB</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">histB</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">binsB</span><span class="o">=</span><span class="n">histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataB</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
        <span class="c1">#Creating the histogram plot channel C</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataC</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">histC</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">binsC</span><span class="o">=</span><span class="n">histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataC</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
        <span class="c1">#Creating the histogram plot channel D</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataD</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">histD</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">binsD</span><span class="o">=</span><span class="n">histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataD</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
        
        <span class="c1">#Pure data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datapureA</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datapureB</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datapureC</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datapureD</span><span class="o">=</span><span class="p">[]</span>
        
        <span class="c1">#Sentinel thread worker thread created</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threadCreatedSentinel</span><span class="o">=</span><span class="kc">False</span>
        <span class="c1">#get the value of the status Bar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusValue</span><span class="o">=</span><span class="n">statusValue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusPoint</span><span class="o">=</span><span class="n">statusPoint</span>
        <span class="c1">#Check if the zoom is not changed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedA</span><span class="o">=</span><span class="mi">0</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedB</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedC</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedD</span><span class="o">=</span><span class="mi">0</span>
        <span class="c1">#Check if the zoom is in code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeA</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeB</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeC</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeD</span><span class="o">=</span><span class="kc">False</span>
        <span class="c1">#Check if the device take a measurement before</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beforeMeasurement</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxYA</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxYB</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxYC</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxYD</span><span class="o">=</span><span class="mi">0</span>
        
        


        
    <span class="c1">#Function to know the state of device   </span>
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##------Begin the create graphs----##</span>
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##---------------------------------##  </span>
           
        
<div class="viewcode-block" id="StartStopLogic.create_graphs"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.create_graphs">[docs]</a>    <span class="k">def</span> <span class="nf">create_graphs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates histograms and plots for the selected channels (A, B, C, D) and arranges them on the GUI. </span>

<span class="sd">        This function initializes the graphical components and assigns the appropriate properties to the plots based on the selected channels.</span>
<span class="sd">        It also manages the layout of the graphs, resizing them according to the number of selected channels (1, 2, 3, or 4). </span>
<span class="sd">        After setting up the graphical components, the function starts a worker thread that handles the measurement process in parallel with the GUI thread, ensuring the UI remains responsive.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#Set the timer to update the graphics</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">=</span><span class="n">QTimer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataA</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataB</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataC</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataD</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datapureA</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datapureB</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datapureC</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datapureD</span><span class="o">=</span><span class="p">[]</span>
        <span class="c1"># Create a list with the selected widgets</span>
        <span class="n">widgets</span> <span class="o">=</span> <span class="p">[]</span>
        
        
        <span class="c1">#Sentinels set in false</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveA</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveB</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveC</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveD</span><span class="o">=</span><span class="kc">False</span>
        
        <span class="c1">#Set if the file is save with this sentinel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelsavetxt</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelsavecsv</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelsavedat</span><span class="o">=</span><span class="mi">0</span>

        <span class="c1"># Add widgets selected to the list</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkA</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="c1">#Init zoom variable</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_zoomingA</span><span class="o">=</span><span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">winA</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">GraphicsLayoutWidget</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">winA</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">winA</span><span class="o">.</span><span class="n">addPlot</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">showGrid</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
            <span class="c1">#Check the channel A</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Start-Stop Channel A&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel1</span><span class="o">.</span><span class="n">getMode</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;Start-stop time (ns)&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;Start-stop time (ms)&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">setMouseEnabled</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">disableAutoRange</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">ViewBox</span><span class="o">.</span><span class="n">XAxis</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">setXRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_A</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">winA</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curveA</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binsA</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">histA</span><span class="p">,</span> <span class="n">stepMode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fillLevel</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">brush</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ChannelA (Blue)&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveA</span><span class="o">=</span><span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">viewBoxA</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">sigRangeChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoom_changedA</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeButtonA</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">autoBtn</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeButtonA</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeButtonA</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">autoRangeA</span><span class="p">)</span>
            
            

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkB</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="c1">#Init zoom variable</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_zoomingB</span><span class="o">=</span><span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">winB</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">GraphicsLayoutWidget</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">winB</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotB</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">winB</span><span class="o">.</span><span class="n">addPlot</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">showGrid</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
            <span class="c1">#Check the channel B</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Start-Stop Channel B&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel2</span><span class="o">.</span><span class="n">getMode</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;Start-stop time (ns)&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;Start-stop time (ms)&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">setMouseEnabled</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">disableAutoRange</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">ViewBox</span><span class="o">.</span><span class="n">XAxis</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeB</span><span class="o">=</span><span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">setXRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_B</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">winB</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curveB</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binsB</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">histB</span><span class="p">,</span> <span class="n">stepMode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fillLevel</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">brush</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ChannelB (Red)&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveB</span><span class="o">=</span><span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">viewBoxB</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">viewBoxB</span><span class="o">.</span><span class="n">sigRangeChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoom_changedB</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeButtonB</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">autoBtn</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeButtonB</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeButtonB</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">autoRangeB</span><span class="p">)</span>
            
            

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkC</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="c1">#Init zoom variable</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_zoomingC</span><span class="o">=</span><span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">winC</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">GraphicsLayoutWidget</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">winC</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotC</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">winC</span><span class="o">.</span><span class="n">addPlot</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">showGrid</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
            <span class="c1">#Check the channel C</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Start-Stop Channel C&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel3</span><span class="o">.</span><span class="n">getMode</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;Start-stop time (ns)&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;Start-stop time (ms)&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">setMouseEnabled</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">disableAutoRange</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">ViewBox</span><span class="o">.</span><span class="n">XAxis</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeC</span><span class="o">=</span><span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">setXRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_C</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">winC</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curveC</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binsC</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">histC</span><span class="p">,</span> <span class="n">stepMode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fillLevel</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">brush</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ChannelC (Green)&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveC</span><span class="o">=</span><span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">viewBoxC</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">sigRangeChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoom_changedC</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeButtonC</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">autoBtn</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeButtonC</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeButtonC</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">autoRangeC</span><span class="p">)</span>
            
            

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkD</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="c1">#Init zoom variable</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_zoomingD</span><span class="o">=</span><span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">winD</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">GraphicsLayoutWidget</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">winD</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotD</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">winD</span><span class="o">.</span><span class="n">addPlot</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">showGrid</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span><span class="s1">&#39;Frequency&#39;</span><span class="p">)</span>
            <span class="c1">#Check the channel D</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Start-Stop Channel D&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel4</span><span class="o">.</span><span class="n">getMode</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;Start-stop time (ns)&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;Start-stop time (ms)&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">setMouseEnabled</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">disableAutoRange</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">pg</span><span class="o">.</span><span class="n">ViewBox</span><span class="o">.</span><span class="n">XAxis</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeD</span><span class="o">=</span><span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">setXRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_D</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">winD</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curveD</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">binsD</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">histD</span><span class="p">,</span> <span class="n">stepMode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fillLevel</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">brush</span><span class="o">=</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="p">),</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ChannelD (Yellow)&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveD</span><span class="o">=</span><span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">viewBoxD</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">sigRangeChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoom_changedD</span><span class="p">)</span>
            <span class="c1">#Button autorange</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeButtonD</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">autoBtn</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeButtonD</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoRangeButtonD</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">autoRangeD</span><span class="p">)</span>
            

        <span class="c1"># Clear the widget</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">.</span><span class="n">count</span><span class="p">())):</span>
            <span class="n">widget_to_remove</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">.</span><span class="n">itemAt</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">.</span><span class="n">removeWidget</span><span class="p">(</span><span class="n">widget_to_remove</span><span class="p">)</span>
            <span class="n">widget_to_remove</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

        <span class="c1"># Put the widgets </span>
        <span class="n">num_widgets</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">widgets</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">num_widgets</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widgets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">num_widgets</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widgets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widgets</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">num_widgets</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widgets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widgets</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widgets</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">num_widgets</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widgets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widgets</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widgets</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gridlayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">widgets</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            
        <span class="c1">#Crete the worker Thread</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">=</span><span class="n">WorkerThreadStartStopHistogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveA</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveB</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveC</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveD</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threadComplete</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">dataPureSignal</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateDataPure</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateSignal</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">threadCreated</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threadRunning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">dialogInit</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">createDialog</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">colorValue</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeColorThread</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">stringValue</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeStatusThread</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">dialogSignal</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dialogChangeMode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">newMaxValueSignal</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeZoomMax</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">start</span><span class="p">()</span></div>
        
    
    
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##--Begin with start-stop buttons--##</span>
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##---------------------------------##  </span>
    
    
<div class="viewcode-block" id="StartStopLogic.start_graphic"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.start_graphic">[docs]</a>    <span class="k">def</span> <span class="nf">start_graphic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Starts the graphical representation of the measurement based on the selected channels.</span>

<span class="sd">        If no channels are selected, it prompts the user to select at least one channel before proceeding. </span>
<span class="sd">        It also disables certain buttons to prevent interaction during the measurement process.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkA</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkB</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkC</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkD</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()):</span>
            <span class="n">message_box</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
            <span class="n">message_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;You must select at least one channel before starting a measurement.&quot;</span><span class="p">)</span>
            <span class="n">message_box</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Select a channel&quot;</span><span class="p">)</span>
            <span class="n">message_box</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
            <span class="n">pixmap</span><span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="s2">&quot;/Sources/tausand_small.ico&quot;</span><span class="p">)</span>
            <span class="n">message_box</span><span class="o">.</span><span class="n">setIconPixmap</span><span class="p">(</span><span class="n">pixmap</span><span class="p">)</span>
            <span class="n">message_box</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>
            <span class="n">message_box</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">.</span><span class="n">saveSettings</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">withoutMeasurement</span><span class="o">=</span><span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stopTimerConnection</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedA</span><span class="o">=</span><span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedB</span><span class="o">=</span><span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedC</span><span class="o">=</span><span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedD</span><span class="o">=</span><span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disconnectButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">.</span><span class="n">activeMeasurement</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_graphs</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">statusValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Measurement running&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">changeStatusColor</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stopbutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startbutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">checkA</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">checkB</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">checkC</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">checkD</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">savebutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>
            
    
    
    
<div class="viewcode-block" id="StartStopLogic.stopTimerConnection"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.stopTimerConnection">[docs]</a>    <span class="k">def</span> <span class="nf">stopTimerConnection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stops the timer responsible for checking the device connection.</span>

<span class="sd">        This function is typically called when a measurement begins to avoid interference</span>
<span class="sd">        during the acquisition process.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#Stop timer when a measurement begins</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timerConnection</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="StartStopLogic.startTimerConnection"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.startTimerConnection">[docs]</a>    <span class="k">def</span> <span class="nf">startTimerConnection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Starts the timer that periodically checks the device connection.</span>

<span class="sd">        The timer runs every 500 milliseconds to monitor connectivity. This is typically </span>
<span class="sd">        called after a measurement finishes or when the application is idle.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#Start timer when a measurement begins</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timerConnection</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="StartStopLogic.hide_graphic2"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.hide_graphic2">[docs]</a>    <span class="k">def</span> <span class="nf">hide_graphic2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Disables the start and stop buttons in the graphical interface.</span>

<span class="sd">        This function is typically used to prevent user interaction during certain operations.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startbutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopbutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>
        
    
<div class="viewcode-block" id="StartStopLogic.show_graphic"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.show_graphic">[docs]</a>    <span class="k">def</span> <span class="nf">show_graphic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_new</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the device and its channels, enabling the start button for measurement.</span>

<span class="sd">        :param device_new: The new device to be set (DeviceType).</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">=</span><span class="n">device_new</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel3</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channel4</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startbutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="StartStopLogic.stop_graphic"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.stop_graphic">[docs]</a>    <span class="k">def</span> <span class="nf">stop_graphic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enables the functions to initiate a new measurement while disabling the buttons to clear graphs. </span>
<span class="sd">        It also updates the status bar text and color.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">withoutMeasurement</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startTimerConnection</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">threadCreatedSentinel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beforeMeasurement</span><span class="o">=</span><span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;No measurement running&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">changeStatusColor</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disconnectButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">.</span><span class="n">noMeasurement</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopbutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">withoutMeasurement</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startbutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">savebutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_graphs</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_A</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_B</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_C</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_channel_D</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkA</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkB</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkC</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkD</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span></div>
    
    
    <span class="c1">#Future function if we want to add the option of number of measurements</span>
<div class="viewcode-block" id="StartStopLogic.threadComplete"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.threadComplete">[docs]</a>    <span class="k">def</span> <span class="nf">threadComplete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles the completion of the measurement thread by enabling the ability to switch between windows. </span>
<span class="sd">        It also calls the stop_graphic() function to update the UI accordingly.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">setTabEnabled</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threadCreated</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_graphic</span><span class="p">()</span></div>
    
    
        
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##------Clear graphics buttons-----##</span>
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##---------------------------------##  </span>
    
<div class="viewcode-block" id="StartStopLogic.clear_a"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.clear_a">[docs]</a>    <span class="k">def</span> <span class="nf">clear_a</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears the lists containing measured data for channel A by resetting them to empty lists.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataA</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datapureA</span><span class="o">=</span><span class="p">[]</span></div>
        
<div class="viewcode-block" id="StartStopLogic.clear_b"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.clear_b">[docs]</a>    <span class="k">def</span> <span class="nf">clear_b</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears the lists containing measured data for channel B by resetting them to empty lists.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataB</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datapureB</span><span class="o">=</span><span class="p">[]</span></div>
    
<div class="viewcode-block" id="StartStopLogic.clear_c"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.clear_c">[docs]</a>    <span class="k">def</span> <span class="nf">clear_c</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears the lists containing measured data for channel C by resetting them to empty lists.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataC</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datapureC</span><span class="o">=</span><span class="p">[]</span></div>
    
<div class="viewcode-block" id="StartStopLogic.clear_d"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.clear_d">[docs]</a>    <span class="k">def</span> <span class="nf">clear_d</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears the lists containing measured data for channel D by resetting them to empty lists.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataD</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datapureD</span><span class="o">=</span><span class="p">[]</span></div>
    
    
<div class="viewcode-block" id="StartStopLogic.update_histogram"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.update_histogram">[docs]</a>    <span class="k">def</span> <span class="nf">update_histogram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">curve</span><span class="p">,</span> <span class="n">indexChannel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates and updates the histogram for the specified channel based on the measured data.</span>

<span class="sd">        The function first checks the selected channel (A, B, C, or D) and retrieves the </span>
<span class="sd">        current view range from the corresponding view box. It then creates bins for the </span>
<span class="sd">        histogram based on this range, using a total of 61 bins. </span>

<span class="sd">        Finally, it computes the histogram of the provided data and updates the specified </span>
<span class="sd">        curve in the plot with the histogram values.</span>

<span class="sd">        :param data: The measured data used to calculate the histogram (list).</span>
<span class="sd">        :param curve: The curve item from the plot in PyQt5 with PyQtGraph that corresponds </span>
<span class="sd">                    to the channel (PlotCurveItem).</span>
<span class="sd">        :param indexChannel: The identifier of the channel for the histogram, which can </span>
<span class="sd">                            be &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, or &quot;D&quot; (str).</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Calculate the histogram</span>
        <span class="k">if</span> <span class="n">indexChannel</span><span class="o">==</span><span class="s2">&quot;A&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeA</span><span class="o">=</span><span class="kc">True</span>
            <span class="n">x_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewBoxA</span><span class="o">.</span><span class="n">viewRange</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">binsU</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">61</span><span class="p">)</span>
            
            
        <span class="k">elif</span> <span class="n">indexChannel</span> <span class="o">==</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeB</span><span class="o">=</span><span class="kc">True</span>
            <span class="n">x_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewBoxB</span><span class="o">.</span><span class="n">viewRange</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">binsU</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">61</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">indexChannel</span> <span class="o">==</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeC</span><span class="o">=</span><span class="kc">True</span>
            <span class="n">x_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewBoxC</span><span class="o">.</span><span class="n">viewRange</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">binsU</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">61</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">indexChannel</span> <span class="o">==</span> <span class="s2">&quot;D&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeD</span><span class="o">=</span><span class="kc">True</span>
            <span class="n">x_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewBoxD</span><span class="o">.</span><span class="n">viewRange</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">binsU</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">61</span><span class="p">)</span>
        <span class="n">hist</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">histogram</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">binsU</span><span class="p">)</span>
        <span class="n">curve</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">binsU</span><span class="p">,</span> <span class="n">hist</span><span class="p">,</span> <span class="n">fillLevel</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></div>
        
    
    <span class="c1">##-------------------------------------------##</span>
    <span class="c1">##-------------------------------------------##</span>
    <span class="c1">##--Get the histogram bins according to zoom-##</span>
    <span class="c1">##-------------------------------------------##</span>
    <span class="c1">##-------------------------------------------## </span>
    
    
<div class="viewcode-block" id="StartStopLogic.zoom_changedA"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.zoom_changedA">[docs]</a>    <span class="k">def</span> <span class="nf">zoom_changedA</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Automatically calculates and updates the histogram for channel A when the user </span>
<span class="sd">        zooms in on the corresponding graph.</span>

<span class="sd">        The function checks if the zoom was triggered by code or user action. If it was </span>
<span class="sd">        triggered by the user, it increments the sentinel for zoom changes. It then </span>
<span class="sd">        retrieves the current x-range from the view box for channel A and computes the </span>
<span class="sd">        bin width for the histogram.</span>

<span class="sd">        Next, it creates 61 bins based on the x-range and calculates the histogram </span>
<span class="sd">        using the measured data. The histogram data is then used to update the curve </span>
<span class="sd">        item for channel A in the plot.</span>

<span class="sd">        :param: None</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeA</span><span class="p">:</span>
            <span class="c1">#print(&quot;Zoom Code&quot;)</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedA</span><span class="o">+=</span><span class="mi">1</span>
            <span class="c1">#print(&quot;Zoom user&quot;)</span>
        <span class="c1"># Function called for graphA zoom </span>
        <span class="n">x_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewBoxA</span><span class="o">.</span><span class="n">viewRange</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Get current x range in the view</span>
        <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>   <span class="c1"># Get the max and min current range in the view</span>
        <span class="n">bin_width</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_max</span> <span class="o">-</span> <span class="n">x_min</span><span class="p">)</span> <span class="o">/</span> <span class="mi">61</span>  
        <span class="n">binsA</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">61</span><span class="p">)</span>  <span class="c1"># Create 61 points in order to get the boundaries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">histA</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataA</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">binsA</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curveA</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">binsA</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">histA</span><span class="p">)</span>  <span class="c1"># Update the graphic</span>
        <span class="k">if</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">histA</span><span class="p">)</span><span class="o">!=</span><span class="bp">self</span><span class="o">.</span><span class="n">maxYA</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">maxYA</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">histA</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeA</span><span class="o">=</span><span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>    
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeA</span><span class="o">=</span><span class="kc">False</span></div>
        
    
    
        
        
        
    <span class="c1">#Change the zoom of the graphic B</span>
<div class="viewcode-block" id="StartStopLogic.zoom_changedB"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.zoom_changedB">[docs]</a>    <span class="k">def</span> <span class="nf">zoom_changedB</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Automatically calculates and updates the histogram for channel B when the user </span>
<span class="sd">        zooms in on the corresponding graph.</span>

<span class="sd">        The function checks if the zoom was triggered by code or user action. If it was </span>
<span class="sd">        triggered by the user, it increments the sentinel for zoom changes. It then </span>
<span class="sd">        retrieves the current x-range from the view box for channel B and computes the </span>
<span class="sd">        bin width for the histogram.</span>

<span class="sd">        Next, it creates 61 bins based on the x-range and calculates the histogram </span>
<span class="sd">        using the measured data. The histogram data is then used to update the curve </span>
<span class="sd">        item for channel B in the plot.</span>

<span class="sd">        :param: None</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeB</span><span class="p">:</span>
            <span class="c1">#print(&quot;Zoom code&quot;)</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedB</span><span class="o">+=</span><span class="mi">1</span>
            <span class="c1">#print(&quot;Zoom user&quot;)</span>
        <span class="c1"># Function called for graphB zoom</span>
        <span class="n">x_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewBoxB</span><span class="o">.</span><span class="n">viewRange</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>   <span class="c1"># Get current x range in the view</span>
        <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>    <span class="c1"># Get the max and min current range in the view</span>
        <span class="n">bin_width</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_max</span> <span class="o">-</span> <span class="n">x_min</span><span class="p">)</span> <span class="o">/</span> <span class="mi">61</span>  
        <span class="n">binsB</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">61</span><span class="p">)</span>  <span class="c1"># Create 61 points in order to get the boundaries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">histB</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataB</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">binsB</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curveB</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">binsB</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">histB</span><span class="p">)</span>  <span class="c1"># Update the graphic</span>
        <span class="k">if</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">histB</span><span class="p">)</span><span class="o">!=</span><span class="bp">self</span><span class="o">.</span><span class="n">maxYB</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">maxYB</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">histB</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeB</span><span class="o">=</span><span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>    
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeB</span><span class="o">=</span><span class="kc">False</span></div>
        
        
    
    <span class="c1">#Change the zoom of the graphic C</span>
<div class="viewcode-block" id="StartStopLogic.zoom_changedC"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.zoom_changedC">[docs]</a>    <span class="k">def</span> <span class="nf">zoom_changedC</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Automatically calculates and updates the histogram for channel C when the user </span>
<span class="sd">        zooms in on the corresponding graph.</span>

<span class="sd">        The function checks if the zoom was triggered by code or user action. If it was </span>
<span class="sd">        triggered by the user, it increments the sentinel for zoom changes. It then </span>
<span class="sd">        retrieves the current x-range from the view box for channel C and computes the </span>
<span class="sd">        bin width for the histogram.</span>

<span class="sd">        Next, it creates 61 bins based on the x-range and calculates the histogram </span>
<span class="sd">        using the measured data. The histogram data is then used to update the curve </span>
<span class="sd">        item for channel C in the plot.</span>

<span class="sd">        :param: None</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeC</span><span class="p">:</span>
            <span class="c1">#print(&quot;Zoom code&quot;)</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedC</span><span class="o">+=</span><span class="mi">1</span>
            <span class="c1">#print(&quot;Zoom user&quot;)</span>
        <span class="c1"># Function called for graphC zoom</span>
        <span class="n">x_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewBoxC</span><span class="o">.</span><span class="n">viewRange</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Get current x range in the view</span>
        <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>   <span class="c1"># Get the max and min current range in the view</span>
        <span class="n">bin_width</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_max</span> <span class="o">-</span> <span class="n">x_min</span><span class="p">)</span> <span class="o">/</span> <span class="mi">61</span>  
        <span class="n">binsC</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">61</span><span class="p">)</span>  <span class="c1"># Create 61 points in order to get the boundaries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">histC</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataC</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">binsC</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curveC</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">binsC</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">histC</span><span class="p">)</span>  <span class="c1"># Update the graphic</span>
        <span class="k">if</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">histC</span><span class="p">)</span><span class="o">!=</span><span class="bp">self</span><span class="o">.</span><span class="n">maxYC</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">maxYC</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">histC</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeC</span><span class="o">=</span><span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>    
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeC</span><span class="o">=</span><span class="kc">False</span></div>
        
        
        
    <span class="c1">#Change the zoom of the graphic D</span>
<div class="viewcode-block" id="StartStopLogic.zoom_changedD"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.zoom_changedD">[docs]</a>    <span class="k">def</span> <span class="nf">zoom_changedD</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Automatically calculates and updates the histogram for channel D when the user </span>
<span class="sd">        zooms in on the corresponding graph.</span>

<span class="sd">        The function checks if the zoom was triggered by code or user action. If it was </span>
<span class="sd">        triggered by the user, it increments the sentinel for zoom changes. It then </span>
<span class="sd">        retrieves the current x-range from the view box for channel D and computes the </span>
<span class="sd">        bin width for the histogram.</span>

<span class="sd">        Next, it creates 61 bins based on the x-range and calculates the histogram </span>
<span class="sd">        using the measured data. The histogram data is then used to update the curve </span>
<span class="sd">        item for channel D in the plot.</span>

<span class="sd">        :param: None</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeD</span><span class="p">:</span>
            <span class="c1">#print(&quot;Zoom code&quot;)</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedD</span><span class="o">+=</span><span class="mi">1</span>
            <span class="c1">#print(&quot;Zoom user&quot;)</span>
        <span class="c1"># Function called for graphD zoom</span>
          
        <span class="n">x_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewBoxD</span><span class="o">.</span><span class="n">viewRange</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Get current x range in the view</span>
        <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">=</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>   <span class="c1"># Get the max and min current range in the view</span>
        <span class="n">bin_width</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_max</span> <span class="o">-</span> <span class="n">x_min</span><span class="p">)</span> <span class="o">/</span> <span class="mi">61</span>  
        <span class="n">binsD</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">61</span><span class="p">)</span>  <span class="c1"># Create 61 points in order to get the boundaries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">histD</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataD</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">binsD</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curveD</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">binsD</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">histD</span><span class="p">)</span>  <span class="c1"># Update the graphic</span>
        <span class="k">if</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">histD</span><span class="p">)</span><span class="o">!=</span><span class="bp">self</span><span class="o">.</span><span class="n">maxYD</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">maxYD</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">histD</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeD</span><span class="o">=</span><span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>    
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeD</span><span class="o">=</span><span class="kc">False</span></div>

    
    
    <span class="c1">##--------------##</span>
    <span class="c1">##--------------##</span>
    <span class="c1">##--Save files--##</span>
    <span class="c1">##--------------##</span>
    <span class="c1">##--------------## </span>
<div class="viewcode-block" id="StartStopLogic.save_graphic"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.save_graphic">[docs]</a>    <span class="k">def</span> <span class="nf">save_graphic</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the current data according to the selected format specified in the dialog box.</span>

<span class="sd">        The function starts by retrieving the default histogram name and the current </span>
<span class="sd">        date, which is formatted to create a unique filename. It then initializes lists </span>
<span class="sd">        to hold filenames, data, settings, and column names for the saved files.</span>

<span class="sd">        A dialog box is displayed for the user to select the desired file format </span>
<span class="sd">        (txt, csv, or dat) for saving the data. Once the user accepts the selection, </span>
<span class="sd">        the function checks if the selected format has already been saved before.</span>

<span class="sd">        If the selected format has not been saved, it collects data from the various </span>
<span class="sd">        channels (A, B, C, D) if their corresponding sentinel variables indicate </span>
<span class="sd">        they should be saved. It retrieves the average cycles, mode, number of stops, </span>
<span class="sd">        stop edge, and stop mask for each channel to include in the settings. The </span>
<span class="sd">        function then attempts to save the collected data in the specified format.</span>

<span class="sd">        If the save operation is successful, a message box is displayed, confirming </span>
<span class="sd">        the successful save and showing the folder path and file names. If an error </span>
<span class="sd">        occurs during the save process, an error message box is shown.</span>

<span class="sd">        If the selected format has already been saved, a message box is displayed </span>
<span class="sd">        with the previous save information.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">data_prefix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">savefile</span><span class="o">.</span><span class="n">read_default_data</span><span class="p">()[</span><span class="s1">&#39;Default Histogram Name&#39;</span><span class="p">]</span>
        <span class="n">current_date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">current_date_str</span><span class="o">=</span><span class="n">current_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="c1">#Init filenames and data list</span>
        <span class="n">filenames</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">data</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">settings</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">column_names</span><span class="o">=</span><span class="p">[]</span>
        <span class="c1">#Open select the format</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">QDialog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;TextFormat&quot;</span><span class="p">)</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">282</span><span class="p">,</span> <span class="mi">105</span><span class="p">)</span>
        <span class="n">dialog</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Save&quot;</span><span class="p">)</span>
        <span class="n">verticalLayout_2</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="n">dialog</span><span class="p">)</span>
        <span class="n">verticalLayout_2</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;verticalLayout_2&quot;</span><span class="p">)</span>
        <span class="n">VerticalImage</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">VerticalImage</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;VerticalImage&quot;</span><span class="p">)</span>
        <span class="n">SelectLabel</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="n">dialog</span><span class="p">)</span>
        <span class="n">SelectLabel</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;SelectLabel&quot;</span><span class="p">)</span>
        <span class="n">SelectLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Select the text format:&quot;</span><span class="p">)</span>
        <span class="n">VerticalImage</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">SelectLabel</span><span class="p">)</span>
        <span class="n">FormatBox</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">(</span><span class="n">dialog</span><span class="p">)</span>
        <span class="n">FormatBox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;txt&quot;</span><span class="p">)</span>
        <span class="n">FormatBox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;csv&quot;</span><span class="p">)</span>
        <span class="n">FormatBox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;dat&quot;</span><span class="p">)</span>
        <span class="n">FormatBox</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;FormatBox&quot;</span><span class="p">)</span>
        <span class="n">VerticalImage</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">FormatBox</span><span class="p">)</span>
        <span class="n">verticalLayout_2</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">VerticalImage</span><span class="p">)</span>
        <span class="n">accepButton</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="n">dialog</span><span class="p">)</span>
        <span class="n">accepButton</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;accepButton&quot;</span><span class="p">)</span>
        <span class="n">accepButton</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Accept&quot;</span><span class="p">)</span>
        <span class="n">verticalLayout_2</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">accepButton</span><span class="p">)</span>
        <span class="n">QMetaObject</span><span class="o">.</span><span class="n">connectSlotsByName</span><span class="p">(</span><span class="n">dialog</span><span class="p">)</span>
        
        <span class="c1"># Connect the accept button with real accept</span>
        <span class="n">accepButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dialog</span><span class="o">.</span><span class="n">accept</span><span class="p">)</span>
        
        
        <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span> <span class="o">==</span> <span class="n">QDialog</span><span class="o">.</span><span class="n">Accepted</span><span class="p">:</span>
            <span class="n">selected_format</span> <span class="o">=</span> <span class="n">FormatBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
            <span class="n">conditiontxt</span><span class="o">=</span> <span class="n">FormatBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span><span class="o">==</span><span class="s2">&quot;txt&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentinelsavetxt</span><span class="o">==</span><span class="mi">1</span>
            <span class="n">conditioncsv</span><span class="o">=</span> <span class="n">FormatBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span><span class="o">==</span><span class="s2">&quot;csv&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentinelsavecsv</span><span class="o">==</span><span class="mi">1</span>
            <span class="n">conditiondat</span><span class="o">=</span> <span class="n">FormatBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span><span class="o">==</span><span class="s2">&quot;dat&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentinelsavedat</span><span class="o">==</span><span class="mi">1</span>   
            <span class="n">total_condition</span><span class="o">=</span> <span class="n">conditiontxt</span> <span class="ow">or</span> <span class="n">conditioncsv</span> <span class="ow">or</span> <span class="n">conditiondat</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">total_condition</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveA</span><span class="p">:</span>
                    <span class="n">filename1</span><span class="o">=</span><span class="n">data_prefix</span><span class="o">+</span><span class="n">current_date_str</span><span class="o">+</span><span class="s1">&#39;channelA&#39;</span>
                    <span class="n">setting_A</span><span class="o">=</span><span class="s2">&quot;Average cycles: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel1</span><span class="o">.</span><span class="n">getAverageCycles</span><span class="p">())</span><span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Mode: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel1</span><span class="o">.</span><span class="n">getMode</span><span class="p">())</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Number of stops:&quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel1</span><span class="o">.</span><span class="n">getNumberOfStops</span><span class="p">())</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Stop edge: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel1</span><span class="o">.</span><span class="n">getStopEdge</span><span class="p">())</span><span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Stop mask: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel1</span><span class="o">.</span><span class="n">getStopMask</span><span class="p">())</span>
                    <span class="n">settings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">setting_A</span><span class="p">)</span>
                    <span class="n">filenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename1</span><span class="p">)</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datapureA</span><span class="p">)</span>
                    <span class="n">column_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;channelA_data (ps)&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveB</span><span class="p">:</span>
                    <span class="n">filename2</span><span class="o">=</span><span class="n">data_prefix</span><span class="o">+</span><span class="n">current_date_str</span><span class="o">+</span><span class="s1">&#39;channelB&#39;</span>
                    <span class="n">setting_B</span><span class="o">=</span><span class="s2">&quot;Average cycles: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel2</span><span class="o">.</span><span class="n">getAverageCycles</span><span class="p">())</span><span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Mode: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel2</span><span class="o">.</span><span class="n">getMode</span><span class="p">())</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Number of stops:&quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel2</span><span class="o">.</span><span class="n">getNumberOfStops</span><span class="p">())</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Stop edge: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel2</span><span class="o">.</span><span class="n">getStopEdge</span><span class="p">())</span><span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Stop mask: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel2</span><span class="o">.</span><span class="n">getStopMask</span><span class="p">())</span>
                    <span class="n">settings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">setting_B</span><span class="p">)</span>
                    <span class="n">filenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename2</span><span class="p">)</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datapureB</span><span class="p">)</span>
                    <span class="n">column_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;channelB_data (ps)&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveC</span><span class="p">:</span>
                    <span class="n">filename3</span><span class="o">=</span><span class="n">data_prefix</span><span class="o">+</span><span class="n">current_date_str</span><span class="o">+</span><span class="s1">&#39;channelC&#39;</span>
                    <span class="n">setting_C</span><span class="o">=</span><span class="s2">&quot;Average cycles: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel3</span><span class="o">.</span><span class="n">getAverageCycles</span><span class="p">())</span><span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Mode: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel3</span><span class="o">.</span><span class="n">getMode</span><span class="p">())</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Number of stops:&quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel3</span><span class="o">.</span><span class="n">getNumberOfStops</span><span class="p">())</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Stop edge: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel3</span><span class="o">.</span><span class="n">getStopEdge</span><span class="p">())</span><span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Stop mask: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel3</span><span class="o">.</span><span class="n">getStopMask</span><span class="p">())</span>
                    <span class="n">settings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">setting_C</span><span class="p">)</span>
                    <span class="n">filenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename3</span><span class="p">)</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datapureC</span><span class="p">)</span>
                    <span class="n">column_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;channelC_data (ps)&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveD</span><span class="p">:</span>
                    <span class="n">filename4</span><span class="o">=</span><span class="n">data_prefix</span><span class="o">+</span><span class="n">current_date_str</span><span class="o">+</span><span class="s1">&#39;channelD&#39;</span>
                    <span class="n">setting_D</span><span class="o">=</span><span class="s2">&quot;Average cycles: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel4</span><span class="o">.</span><span class="n">getAverageCycles</span><span class="p">())</span><span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Mode: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel4</span><span class="o">.</span><span class="n">getMode</span><span class="p">())</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Number of stops:&quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel4</span><span class="o">.</span><span class="n">getNumberOfStops</span><span class="p">())</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Stop edge: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel4</span><span class="o">.</span><span class="n">getStopEdge</span><span class="p">())</span><span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Stop mask: &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel4</span><span class="o">.</span><span class="n">getStopMask</span><span class="p">())</span>
                    <span class="n">settings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">setting_D</span><span class="p">)</span>
                    <span class="n">filenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename4</span><span class="p">)</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datapureD</span><span class="p">)</span>
                    <span class="n">column_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;channelD_data (ps)&#39;</span><span class="p">)</span>
                <span class="n">folder_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">savefile</span><span class="o">.</span><span class="n">read_default_data</span><span class="p">()[</span><span class="s1">&#39;Folder path&#39;</span><span class="p">]</span>
                
                <span class="k">try</span><span class="p">:</span>
                    
                    <span class="bp">self</span><span class="o">.</span><span class="n">savefile</span><span class="o">.</span><span class="n">save_lists_as_columns_txt</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">filenames</span><span class="p">,</span><span class="n">column_names</span><span class="p">,</span><span class="n">folder_path</span><span class="p">,</span><span class="n">settings</span><span class="p">,</span><span class="n">selected_format</span><span class="p">)</span>
                    <span class="n">message_box</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
                    <span class="n">message_box</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>
                    <span class="n">inital_text</span><span class="o">=</span><span class="s2">&quot;The files have been saved successfully in path folder: &quot;</span>
                    <span class="n">text_route</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">folder_path</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="s2">&quot;with the following names:&quot;</span>
                    <span class="n">index</span><span class="o">=</span><span class="mi">1</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
                        <span class="n">filenumber</span><span class="o">=</span><span class="s2">&quot;File&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;: &quot;</span>
                        <span class="n">text_route</span><span class="o">+=</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="n">filenumber</span><span class="o">+</span><span class="n">i</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">selected_format</span><span class="p">)</span>
                        <span class="n">index</span><span class="o">+=</span><span class="mi">1</span>
                    <span class="n">message_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">inital_text</span><span class="o">+</span><span class="n">text_route</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">selected_format</span><span class="o">==</span><span class="s2">&quot;txt&quot;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">oldroutetxt</span><span class="o">=</span><span class="s2">&quot;The files have already been saved in path folder: &quot;</span><span class="o">+</span> <span class="n">text_route</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelsavetxt</span><span class="o">=</span><span class="mi">1</span>
                    <span class="k">elif</span> <span class="n">selected_format</span><span class="o">==</span><span class="s2">&quot;csv&quot;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">oldroutecsv</span><span class="o">=</span><span class="s2">&quot;The files have already been saved in path folder: &quot;</span><span class="o">+</span> <span class="n">text_route</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelsavecsv</span><span class="o">=</span><span class="mi">1</span>
                    <span class="k">elif</span> <span class="n">selected_format</span><span class="o">==</span><span class="s2">&quot;dat&quot;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">oldroutedat</span><span class="o">=</span><span class="s2">&quot;The files have already been saved in path folder: &quot;</span><span class="o">+</span> <span class="n">text_route</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelsavedat</span><span class="o">=</span><span class="mi">1</span>
                    <span class="n">message_box</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Successful save&quot;</span><span class="p">)</span>
                    <span class="n">message_box</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
                    <span class="n">message_box</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">savebutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="c1">#If an error occurs, an error message box will be displayed.</span>
                    <span class="n">message_box</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
                    <span class="n">message_box</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span>
                    <span class="n">message_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;The changes could not be saved.&quot;</span><span class="p">)</span>
                    <span class="n">message_box</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Error saving&quot;</span><span class="p">)</span>
                    <span class="n">message_box</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
                    <span class="n">message_box</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
                
            <span class="k">else</span><span class="p">:</span>
                <span class="n">message_box</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
                <span class="n">message_box</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">conditiontxt</span><span class="p">:</span>
                    <span class="n">message_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oldroutetxt</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">conditioncsv</span><span class="p">:</span>
                    <span class="n">message_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oldroutecsv</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">conditiondat</span><span class="p">:</span>
                    <span class="n">message_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oldroutedat</span><span class="p">)</span>
                <span class="n">message_box</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Successful save&quot;</span><span class="p">)</span>
                <span class="n">message_box</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
                <span class="n">message_box</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="StartStopLogic.save_plots"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.save_plots">[docs]</a>    <span class="k">def</span> <span class="nf">save_plots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves the current plots in the selected image format.</span>

<span class="sd">        This method opens a dialog for the user to select an image format (PNG, TIFF, or JPG) </span>
<span class="sd">        and saves the plots for channels A, B, C, and D if their respective flags are set to True. </span>
<span class="sd">        The plots are saved with a timestamp in the specified format in the default folder path.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">graph_names</span><span class="o">=</span><span class="p">[]</span>
            <span class="c1">#Open select the format</span>
            <span class="n">dialog</span> <span class="o">=</span> <span class="n">QDialog</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
    
            <span class="n">dialog</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;ImageFormat&quot;</span><span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">282</span><span class="p">,</span> <span class="mi">105</span><span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Save plots&quot;</span><span class="p">)</span>
            
            <span class="c1">#pixmap = QIcon(&quot;./Sources/tausand_small.ico&quot;)</span>
            
            <span class="c1">#dialog.setWindowIcon()</span>
            
            <span class="n">verticalLayout_2</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="n">dialog</span><span class="p">)</span>
            <span class="n">verticalLayout_2</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;verticalLayout_2&quot;</span><span class="p">)</span>
            
            <span class="n">VerticalImage</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
            <span class="n">VerticalImage</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;VerticalImage&quot;</span><span class="p">)</span>
            
            <span class="n">SelectLabel</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="n">dialog</span><span class="p">)</span>
            <span class="n">SelectLabel</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;SelectLabel&quot;</span><span class="p">)</span>
            <span class="n">SelectLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Select the image format:&quot;</span><span class="p">)</span>
            <span class="n">VerticalImage</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">SelectLabel</span><span class="p">)</span>
            
            <span class="n">FormatBox</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">(</span><span class="n">dialog</span><span class="p">)</span>
            <span class="n">FormatBox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;png&quot;</span><span class="p">)</span>
            <span class="n">FormatBox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;tiff&quot;</span><span class="p">)</span>
            <span class="n">FormatBox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;jpg&quot;</span><span class="p">)</span>
            <span class="n">FormatBox</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;FormatBox&quot;</span><span class="p">)</span>
            <span class="n">VerticalImage</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">FormatBox</span><span class="p">)</span>
            
            <span class="n">verticalLayout_2</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">VerticalImage</span><span class="p">)</span>
            
            <span class="n">accepButton</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="n">dialog</span><span class="p">)</span>
            <span class="n">accepButton</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s2">&quot;accepButton&quot;</span><span class="p">)</span>
            <span class="n">accepButton</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Accept&quot;</span><span class="p">)</span>
            <span class="n">verticalLayout_2</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">accepButton</span><span class="p">)</span>
            
            <span class="n">QMetaObject</span><span class="o">.</span><span class="n">connectSlotsByName</span><span class="p">(</span><span class="n">dialog</span><span class="p">)</span>
            
            <span class="c1"># Conectar el botn &quot;Accept&quot; al mtodo accept del dilogo</span>
            <span class="n">accepButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">dialog</span><span class="o">.</span><span class="n">accept</span><span class="p">)</span>
            
            <span class="c1"># Mostrar el dilogo y esperar a que se cierre</span>
            <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span> <span class="o">==</span> <span class="n">QDialog</span><span class="o">.</span><span class="n">Accepted</span><span class="p">:</span>
                <span class="n">selected_format</span> <span class="o">=</span> <span class="n">FormatBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveA</span><span class="p">:</span>
                    <span class="n">exporter</span><span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">exporters</span><span class="o">.</span><span class="n">ImageExporter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="p">)</span>
                    <span class="n">exporter</span><span class="o">.</span><span class="n">parameters</span><span class="p">()[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">800</span>
                    <span class="n">exporter</span><span class="o">.</span><span class="n">parameters</span><span class="p">()[</span><span class="s1">&#39;height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">600</span>
                    <span class="n">folder_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">savefile</span><span class="o">.</span><span class="n">read_default_data</span><span class="p">()[</span><span class="s1">&#39;Folder path&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                    <span class="n">current_date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
                    <span class="n">current_date_str</span><span class="o">=</span><span class="n">current_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                    <span class="n">graph_name</span><span class="o">=</span><span class="s1">&#39;Measure_ChannelA&#39;</span><span class="o">+</span><span class="n">current_date_str</span>
                    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;posix&#39;</span><span class="p">:</span>  
                        <span class="n">exporter</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">folder_path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">graph_name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">selected_format</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>  
                        <span class="n">exporter</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">folder_path</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="o">+</span><span class="n">graph_name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">selected_format</span><span class="p">)</span>
                    <span class="n">graph_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">graph_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveB</span><span class="p">:</span>
                    <span class="n">exporter</span><span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">exporters</span><span class="o">.</span><span class="n">ImageExporter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="p">)</span>
                    <span class="n">exporter</span><span class="o">.</span><span class="n">parameters</span><span class="p">()[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">800</span>
                    <span class="n">exporter</span><span class="o">.</span><span class="n">parameters</span><span class="p">()[</span><span class="s1">&#39;height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">600</span>
                    <span class="n">folder_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">savefile</span><span class="o">.</span><span class="n">read_default_data</span><span class="p">()[</span><span class="s1">&#39;Folder path&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                    <span class="n">current_date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
                    <span class="n">current_date_str</span><span class="o">=</span><span class="n">current_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                    <span class="n">graph_name</span><span class="o">=</span><span class="s1">&#39;Measure_ChannelB&#39;</span><span class="o">+</span><span class="n">current_date_str</span>
                    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;posix&#39;</span><span class="p">:</span>  
                        <span class="n">exporter</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">folder_path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">graph_name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">selected_format</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>  
                        <span class="n">exporter</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">folder_path</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="o">+</span><span class="n">graph_name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">selected_format</span><span class="p">)</span>
                    <span class="n">graph_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">graph_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveC</span><span class="p">:</span>
                    <span class="n">exporter</span><span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">exporters</span><span class="o">.</span><span class="n">ImageExporter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="p">)</span>
                    <span class="n">exporter</span><span class="o">.</span><span class="n">parameters</span><span class="p">()[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">800</span>
                    <span class="n">exporter</span><span class="o">.</span><span class="n">parameters</span><span class="p">()[</span><span class="s1">&#39;height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">600</span>
                    <span class="n">folder_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">savefile</span><span class="o">.</span><span class="n">read_default_data</span><span class="p">()[</span><span class="s1">&#39;Folder path&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                    <span class="n">current_date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
                    <span class="n">current_date_str</span><span class="o">=</span><span class="n">current_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                    <span class="n">graph_name</span><span class="o">=</span><span class="s1">&#39;Measure_ChannelC&#39;</span><span class="o">+</span><span class="n">current_date_str</span>
                    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;posix&#39;</span><span class="p">:</span>  
                        <span class="n">exporter</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">folder_path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">graph_name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">selected_format</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>  
                        <span class="n">exporter</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">folder_path</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="o">+</span><span class="n">graph_name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">selected_format</span><span class="p">)</span>
                    <span class="n">graph_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">graph_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveD</span><span class="p">:</span>
                    <span class="n">exporter</span><span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">exporters</span><span class="o">.</span><span class="n">ImageExporter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="p">)</span>
                    <span class="n">exporter</span><span class="o">.</span><span class="n">parameters</span><span class="p">()[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">800</span>
                    <span class="n">exporter</span><span class="o">.</span><span class="n">parameters</span><span class="p">()[</span><span class="s1">&#39;height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">600</span>
                    <span class="n">folder_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">savefile</span><span class="o">.</span><span class="n">read_default_data</span><span class="p">()[</span><span class="s1">&#39;Folder path&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                    <span class="n">current_date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
                    <span class="n">current_date_str</span><span class="o">=</span><span class="n">current_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                    <span class="n">graph_name</span><span class="o">=</span><span class="s1">&#39;Measure_ChannelD&#39;</span><span class="o">+</span><span class="n">current_date_str</span>
                    <span class="n">exporter</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">folder_path</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="o">+</span><span class="n">graph_name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">selected_format</span><span class="p">)</span>
                    <span class="n">graph_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">graph_name</span><span class="p">)</span>
                    
                <span class="n">message_box</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
                <span class="n">message_box</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>
                <span class="n">initial_text</span><span class="o">=</span><span class="s2">&quot;The plots have been saved successfully in &quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">folder_path</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span> <span class="s2">&quot;with the following names:&quot;</span>
                <span class="n">text_route</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
                <span class="n">index</span><span class="o">=</span><span class="mi">1</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">graph_names</span><span class="p">:</span>
                    <span class="n">text_route</span><span class="o">+=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="s2">&quot;File&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;: &quot;</span><span class="o">+</span><span class="n">i</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="o">+</span><span class="n">selected_format</span>
                    <span class="n">index</span><span class="o">+=</span><span class="mi">1</span>
                <span class="n">message_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">initial_text</span><span class="o">+</span><span class="n">text_route</span><span class="p">)</span>
                <span class="n">message_box</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Successful save&quot;</span><span class="p">)</span>
                <span class="n">message_box</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
                <span class="c1"># show successful save</span>
                <span class="n">message_box</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
                
            
        <span class="k">except</span><span class="p">:</span>
            <span class="n">message_box</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
            <span class="n">message_box</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span>
            <span class="n">message_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;The graphics could not be saved, check the folder path or system files&quot;</span><span class="p">)</span>
            <span class="n">message_box</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Error saving&quot;</span><span class="p">)</span>
            <span class="n">message_box</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
            <span class="n">message_box</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span></div>
            

    <span class="c1">#Function to connect the Thread with update signal</span>
<div class="viewcode-block" id="StartStopLogic.updateSignal"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.updateSignal">[docs]</a>    <span class="k">def</span> <span class="nf">updateSignal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the normalized data values for the specified channel and refreshes the corresponding histogram.</span>

<span class="sd">        This method appends the new value to the list of normalized data for the specified channel </span>
<span class="sd">        (A, B, C, or D) and calls the update_histogram method to refresh the histogram with the </span>
<span class="sd">        updated data.</span>

<span class="sd">        :param value: The normalized value to append to the data list (float or int).</span>
<span class="sd">        :param channel: The channel identifier for which the value is to be updated (str). </span>
<span class="sd">                        Accepted values are &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, and &quot;D&quot;.</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">channel</span><span class="o">==</span><span class="s2">&quot;A&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataA</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataA</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">curveA</span><span class="p">,</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s2">&quot;B&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataB</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataB</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">curveB</span><span class="p">,</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s2">&quot;C&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataC</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataC</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">curveC</span><span class="p">,</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s2">&quot;D&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataD</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataD</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">curveD</span><span class="p">,</span><span class="s2">&quot;D&quot;</span><span class="p">)</span></div>
    
    <span class="c1">#Update dataPure</span>
<div class="viewcode-block" id="StartStopLogic.updateDataPure"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.updateDataPure">[docs]</a>    <span class="k">def</span> <span class="nf">updateDataPure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the raw data values for the specified channel.</span>

<span class="sd">        This method appends the new raw value (in picoseconds) to the list of data for the specified </span>
<span class="sd">        channel (A, B, C, or D).</span>

<span class="sd">        :param value: The raw data value to append to the data list (float or int). </span>
<span class="sd">                    This value is in picoseconds.</span>
<span class="sd">        :param channel: The channel identifier for which the value is to be updated (str). </span>
<span class="sd">                        Accepted values are &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, and &quot;D&quot;.</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">channel</span><span class="o">==</span><span class="s2">&quot;A&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">datapureA</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">*</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s2">&quot;B&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">datapureB</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">*</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s2">&quot;C&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">datapureC</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">*</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s2">&quot;D&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">datapureD</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">*</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">))</span></div>
    
    <span class="c1">#Change the status of sentinel dataThreadCreated</span>
<div class="viewcode-block" id="StartStopLogic.threadRunning"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.threadRunning">[docs]</a>    <span class="k">def</span> <span class="nf">threadRunning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">status</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the thread creation status.</span>

<span class="sd">        This method sets the threadCreatedSentinel attribute to indicate whether a thread has been created </span>
<span class="sd">        based on the provided status value. </span>

<span class="sd">        :param status: The status indicating whether a thread has been created (int). </span>
<span class="sd">                    Use 0 to indicate that the thread has been created, and 1 to indicate that it has not.</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">status</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">threadCreatedSentinel</span><span class="o">=</span><span class="kc">True</span>
        <span class="k">elif</span> <span class="n">status</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">threadCreatedSentinel</span><span class="o">=</span><span class="kc">False</span></div>
    
<div class="viewcode-block" id="StartStopLogic.createDialog"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.createDialog">[docs]</a>    <span class="k">def</span> <span class="nf">createDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a dialog box to notify the user when the connection with the device has been lost.</span>

<span class="sd">        This method displays a critical error message box indicating that the connection with the device</span>
<span class="sd">        has been lost. It also stops any ongoing graphic updates, hides relevant graphics, </span>
<span class="sd">        and disables the disconnect button while enabling the connect button.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">withoutMeasurement</span><span class="o">=</span><span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disconnectedDevice</span><span class="p">()</span>
        <span class="n">msg_box</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Connection with the device has been lost&quot;</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Connection Error&quot;</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_graphic</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hide_graphic2</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disconnectButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connectButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">.</span><span class="n">disconnectedDevice</span><span class="p">()</span></div>
    
    <span class="c1">#Change the color of status Point</span>
    <span class="c1">#Function to change the color of point measurement</span>
<div class="viewcode-block" id="StartStopLogic.changeStatusColor"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.changeStatusColor">[docs]</a>    <span class="k">def</span> <span class="nf">changeStatusColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes the color of the status point in the status bar based on the input value.</span>

<span class="sd">        This method updates the status point&#39;s color by drawing a filled circle with the specified color.</span>
<span class="sd">        The mapping of numerical values to colors is as follows:</span>
<span class="sd">        - 0: Gray</span>
<span class="sd">        - 1: Green</span>
<span class="sd">        - 2: Yellow</span>
<span class="sd">        - 3: Orange</span>

<span class="sd">        :param color: A numerical value representing the desired color (int).</span>
<span class="sd">                    0 for gray, 1 for green, 2 for yellow, 3 for orange.</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pixmap</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">statusPoint</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
        <span class="n">pixmap</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">transparent</span><span class="p">)</span>  
        <span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="n">pixmap</span><span class="p">)</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">setRenderHint</span><span class="p">(</span><span class="n">QPainter</span><span class="o">.</span><span class="n">Antialiasing</span><span class="p">)</span> 
        <span class="c1">#Define the colors</span>
        <span class="c1">#Number 0 is for gray</span>
        <span class="c1">#Number 1 is for green</span>
        <span class="c1">#Number 2 is for yellow</span>
        <span class="c1">#Number 3 is for orange</span>
        <span class="k">if</span> <span class="n">color</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">))</span>  
        <span class="k">elif</span> <span class="n">color</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>  
        <span class="k">elif</span> <span class="n">color</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>  
        <span class="k">elif</span> <span class="n">color</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">165</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>  
        <span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">NoPen</span><span class="p">)</span>
        <span class="n">point_size</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">statusPoint</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusPoint</span><span class="o">.</span><span class="n">height</span><span class="p">())</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">statusPoint</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">-</span> <span class="n">point_size</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">statusPoint</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">-</span> <span class="n">point_size</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">drawEllipse</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">point_size</span><span class="p">,</span> <span class="n">point_size</span><span class="p">)</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusPoint</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">pixmap</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="StartStopLogic.changeColorThread"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.changeColorThread">[docs]</a>    <span class="k">def</span> <span class="nf">changeColorThread</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="n">pixmap</span> <span class="o">=</span> <span class="n">QPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">statusPoint</span><span class="o">.</span><span class="n">size</span><span class="p">())</span>
        <span class="n">pixmap</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">transparent</span><span class="p">)</span>  
        <span class="n">painter</span> <span class="o">=</span> <span class="n">QPainter</span><span class="p">(</span><span class="n">pixmap</span><span class="p">)</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">setRenderHint</span><span class="p">(</span><span class="n">QPainter</span><span class="o">.</span><span class="n">Antialiasing</span><span class="p">)</span> 
        <span class="c1">#Define the colors</span>
        <span class="c1">#Number 0 is for gray</span>
        <span class="c1">#Number 1 is for green</span>
        <span class="c1">#Number 2 is for yellow</span>
        <span class="c1">#Number 3 is for orange</span>
        <span class="k">if</span> <span class="n">color</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">))</span>  
        <span class="k">elif</span> <span class="n">color</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>  
        <span class="k">elif</span> <span class="n">color</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>  
        <span class="k">elif</span> <span class="n">color</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">165</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>  
        <span class="n">painter</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">NoPen</span><span class="p">)</span>
        <span class="n">point_size</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">statusPoint</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">statusPoint</span><span class="o">.</span><span class="n">height</span><span class="p">())</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">statusPoint</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">-</span> <span class="n">point_size</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">statusPoint</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">-</span> <span class="n">point_size</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">drawEllipse</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">point_size</span><span class="p">,</span> <span class="n">point_size</span><span class="p">)</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusPoint</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">pixmap</span><span class="p">)</span></div>
        
        
    
<div class="viewcode-block" id="StartStopLogic.changeStatusThread"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.changeStatusThread">[docs]</a>    <span class="k">def</span> <span class="nf">changeStatusThread</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newText</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the text displayed in the status bar.</span>

<span class="sd">        This method sets the status value text to the specified new text, </span>
<span class="sd">        reflecting the current status or information relevant to the user.</span>

<span class="sd">        :param newText: The text to display in the status bar (str).</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">newText</span><span class="p">)</span></div>
    
    <span class="c1">#Open a dialog if the mode is not getting measurements in its range</span>
<div class="viewcode-block" id="StartStopLogic.dialogChangeMode"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.dialogChangeMode">[docs]</a>    <span class="k">def</span> <span class="nf">dialogChangeMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Opens a dialog box to ask the user if they want to change the mode for the selected channel.</span>

<span class="sd">        The dialog informs the user that the collected data for the specified channel falls </span>
<span class="sd">        mostly outside the reliable range of mode 1 and prompts them to switch to mode 2. </span>
<span class="sd">        If the user confirms, the function updates the mode and processes the data accordingly.</span>

<span class="sd">        :param channel: The channel for which to change the mode (str). </span>
<span class="sd">                        Expected values are &#39;channel A&#39;, &#39;channel B&#39;, &#39;channel C&#39;, or &#39;channel D&#39;.</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">message_box</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">message_box</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Question</span><span class="p">)</span>  
        <span class="n">message_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;The data collected in the &quot;</span><span class="o">+</span><span class="n">channel</span><span class="o">+</span><span class="s2">&quot; mostly falls outside the reliable range of mode 1 (12ns to 500ns). Would you like to switch to mode 2 (125ns to 4ms)?&quot;</span><span class="p">)</span>  
        <span class="n">message_box</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Change Mode&quot;</span><span class="p">)</span>  
        <span class="n">message_box</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span> 
        <span class="n">response</span> <span class="o">=</span> <span class="n">message_box</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="c1">#Change for all modes</span>
        <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
            
            <span class="k">if</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;channel A&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch1</span><span class="o">.</span><span class="n">setMode</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  
                <span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span><span class="s1">&#39;Start-stop time (ms)&#39;</span><span class="p">)</span>
                <span class="n">temporalDataA</span><span class="o">=</span><span class="p">[]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">beforeMeasurement</span><span class="o">=</span><span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedA</span><span class="o">=</span><span class="mi">0</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datapureA</span><span class="p">)):</span>
                    <span class="n">temporalDataA</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datapureA</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dataA</span><span class="o">=</span><span class="n">temporalDataA</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataA</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">curveA</span><span class="p">,</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
                <span class="n">maxValue</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataA</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeA</span><span class="o">=</span><span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">changeZoomMax</span><span class="p">(</span><span class="n">maxValue</span><span class="p">,</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">changeMaxValue</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="n">maxValue</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;channel B&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch2</span><span class="o">.</span><span class="n">setMode</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  
                <span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span><span class="s1">&#39;Start-stop time (ms)&#39;</span><span class="p">)</span>
                <span class="n">temporalDataB</span><span class="o">=</span><span class="p">[]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">beforeMeasurement</span><span class="o">=</span><span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedB</span><span class="o">=</span><span class="mi">0</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datapureB</span><span class="p">)):</span>
                    <span class="n">temporalDataB</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datapureB</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dataB</span><span class="o">=</span><span class="p">[]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dataB</span><span class="o">=</span><span class="n">temporalDataB</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataB</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">curveB</span><span class="p">,</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>
                <span class="n">maxValue</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataB</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeB</span><span class="o">=</span><span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">changeZoomMax</span><span class="p">(</span><span class="n">maxValue</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">changeMaxValue</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="n">maxValue</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;channel C&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch3</span><span class="o">.</span><span class="n">setMode</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  
                <span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span><span class="s1">&#39;Start-stop time (ms)&#39;</span><span class="p">)</span>
                <span class="n">temporalDataC</span><span class="o">=</span><span class="p">[]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">beforeMeasurement</span><span class="o">=</span><span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedC</span><span class="o">=</span><span class="mi">0</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datapureC</span><span class="p">)):</span>
                    <span class="n">temporalDataC</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datapureC</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dataC</span><span class="o">=</span><span class="n">temporalDataC</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataC</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">curveC</span><span class="p">,</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>
                <span class="n">maxValue</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataC</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">changeZoomMax</span><span class="p">(</span><span class="n">maxValue</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">changeMaxValue</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="n">maxValue</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;channel D&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch4</span><span class="o">.</span><span class="n">setMode</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  
                <span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span><span class="s1">&#39;Start-stop time (ms)&#39;</span><span class="p">)</span>
                <span class="n">temporalDataD</span><span class="o">=</span><span class="p">[]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">beforeMeasurement</span><span class="o">=</span><span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedD</span><span class="o">=</span><span class="mi">0</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datapureD</span><span class="p">)):</span>
                    <span class="n">temporalDataD</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">datapureD</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dataD</span><span class="o">=</span><span class="n">temporalDataD</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_histogram</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataD</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">curveD</span><span class="p">,</span><span class="s2">&quot;D&quot;</span><span class="p">)</span>
                <span class="n">maxValue</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataD</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeD</span><span class="o">=</span><span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">changeZoomMax</span><span class="p">(</span><span class="n">maxValue</span><span class="p">,</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">changeMaxValue</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span><span class="n">maxValue</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">dialogIsOpen</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;channel A&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">addChannelWarning</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">dialogIsOpen</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;channel B&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">addChannelWarning</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">dialogIsOpen</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;channel C&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">addChannelWarning</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">dialogIsOpen</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;channel D&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">addChannelWarning</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">dialogIsOpen</span><span class="p">()</span></div>

        
    
    <span class="c1">#Change the maxValue according to max value in the list</span>
<div class="viewcode-block" id="StartStopLogic.changeZoomMax"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.changeZoomMax">[docs]</a>    <span class="k">def</span> <span class="nf">changeZoomMax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newMaxValue</span><span class="p">,</span><span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Automatically adjusts the zoom level of the plot to the maximum value found.</span>

<span class="sd">        The function sets the x-axis range of the specified channel&#39;s plot to [0, newMaxValue].</span>
<span class="sd">        It considers whether measurements have been taken and limits the zoom change based on </span>
<span class="sd">        the sentinel zoom change counters.</span>

<span class="sd">        :param newMaxValue: The new maximum value for the zoom range (float).</span>
<span class="sd">        :param channel: The channel to which the zoom change applies (str).</span>
<span class="sd">                        Expected values are &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, or &#39;D&#39;.</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;A&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">beforeMeasurement</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedA</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeA</span><span class="o">=</span><span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">setXRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">newMaxValue</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedA</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeA</span><span class="o">=</span><span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plotA</span><span class="o">.</span><span class="n">setXRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">newMaxValue</span><span class="p">)</span>
                
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;B&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">beforeMeasurement</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedB</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeB</span><span class="o">=</span><span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">setXRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">newMaxValue</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedB</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeB</span><span class="o">=</span><span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plotB</span><span class="o">.</span><span class="n">setXRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">newMaxValue</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;C&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">beforeMeasurement</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedC</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeC</span><span class="o">=</span><span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">setXRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">newMaxValue</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedC</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeC</span><span class="o">=</span><span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plotC</span><span class="o">.</span><span class="n">setXRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">newMaxValue</span><span class="p">)</span>
                
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;D&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">beforeMeasurement</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedD</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeD</span><span class="o">=</span><span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">setXRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">newMaxValue</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedD</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeD</span><span class="o">=</span><span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plotD</span><span class="o">.</span><span class="n">setXRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">newMaxValue</span><span class="p">)</span></div>
                
    <span class="c1">#auto range beetween 0 and max of Data the graphic with autorange button</span>
    
    <span class="c1">#AutoRangeA</span>
<div class="viewcode-block" id="StartStopLogic.autoRangeA"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.autoRangeA">[docs]</a>    <span class="k">def</span> <span class="nf">autoRangeA</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Automatically adjusts the zoom level of channel A to the maximum value in the data.</span>

<span class="sd">        The function sets a sentinel for zoom changes, checks if there are any data points in </span>
<span class="sd">        channel A, and if so, finds the maximum value. It then calls the changeZoomMax function</span>
<span class="sd">        to adjust the zoom accordingly.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeA</span><span class="o">=</span><span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedA</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataA</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">maxValue</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataA</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">changeZoomMax</span><span class="p">(</span><span class="n">maxValue</span><span class="p">,</span><span class="s1">&#39;A&#39;</span><span class="p">)</span></div>
    
    <span class="c1">#AutoRangeB</span>
<div class="viewcode-block" id="StartStopLogic.autoRangeB"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.autoRangeB">[docs]</a>    <span class="k">def</span> <span class="nf">autoRangeB</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Automatically adjusts the zoom level of channel B to the maximum value in the data.</span>

<span class="sd">        The function sets a sentinel for zoom changes, checks if there are any data points in </span>
<span class="sd">        channel B, and if so, finds the maximum value. It then calls the changeZoomMax function</span>
<span class="sd">        to adjust the zoom accordingly.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeB</span><span class="o">=</span><span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedB</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataB</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">maxValue</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataB</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">changeZoomMax</span><span class="p">(</span><span class="n">maxValue</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">)</span></div>
    
    <span class="c1">#AutoRangeC</span>
<div class="viewcode-block" id="StartStopLogic.autoRangeC"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.autoRangeC">[docs]</a>    <span class="k">def</span> <span class="nf">autoRangeC</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Automatically adjusts the zoom level of channel C to the maximum value in the data.</span>

<span class="sd">        The function sets a sentinel for zoom changes, checks if there are any data points in </span>
<span class="sd">        channel C, and if so, finds the maximum value. It then calls the changeZoomMax function</span>
<span class="sd">        to adjust the zoom accordingly.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeC</span><span class="o">=</span><span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedC</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataC</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">maxValue</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataC</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">changeZoomMax</span><span class="p">(</span><span class="n">maxValue</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">)</span></div>
    
    <span class="c1">#AutoRangeD</span>
<div class="viewcode-block" id="StartStopLogic.autoRangeD"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.autoRangeD">[docs]</a>    <span class="k">def</span> <span class="nf">autoRangeD</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Automatically adjusts the zoom level of channel D to the maximum value in the data.</span>

<span class="sd">        The function sets a sentinel for zoom changes, checks if there are any data points in </span>
<span class="sd">        channel D, and if so, finds the maximum value. It then calls the changeZoomMax function</span>
<span class="sd">        to adjust the zoom accordingly.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomCodeD</span><span class="o">=</span><span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelZoomChangedD</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataD</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">maxValue</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataD</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">changeZoomMax</span><span class="p">(</span><span class="n">maxValue</span><span class="p">,</span><span class="s1">&#39;D&#39;</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="StartStopLogic.disconnectedDevice"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.StartStopLogic.disconnectedDevice">[docs]</a>    <span class="k">def</span> <span class="nf">disconnectedDevice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Disables device interaction controls when the device is disconnected.</span>

<span class="sd">        This function updates the GUI to reflect that the device is no longer connected </span>
<span class="sd">        by disabling the disconnect and start buttons and enabling the connect button.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">.</span><span class="n">disconnectButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="o">.</span><span class="n">connectButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startbutton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div></div>
    
    
        
    
<div class="viewcode-block" id="WorkerThreadStartStopHistogram"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.WorkerThreadStartStopHistogram">[docs]</a><span class="k">class</span> <span class="nc">WorkerThreadStartStopHistogram</span><span class="p">(</span><span class="n">QThread</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents a worker thread that processes Start-Stop measurements in a separate thread to avoid blocking the main GUI thread. </span>
<span class="sd">    It handles data collection from the Tempico device, processes the data, and emits signals to update the GUI with the results.</span>
<span class="sd">    </span>
<span class="sd">    :param parent: The parent QWindow of the thread.</span>
<span class="sd">    :param device: The Tempico device class that handles the measurements.</span>
<span class="sd">    :param sentinelSaveA, sentinelSaveB, sentinelSaveC, sentinelSaveD: Boolean flags that determine if data for each channel should be saved.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dataSignal</span><span class="o">=</span><span class="n">Signal</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">dataPureSignal</span><span class="o">=</span><span class="n">Signal</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">threadCreated</span><span class="o">=</span><span class="n">Signal</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">dialogInit</span><span class="o">=</span><span class="n">Signal</span><span class="p">()</span>
    <span class="n">colorValue</span><span class="o">=</span><span class="n">Signal</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">stringValue</span><span class="o">=</span><span class="n">Signal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">dialogSignal</span><span class="o">=</span><span class="n">Signal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">newMaxValueSignal</span><span class="o">=</span><span class="n">Signal</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span>
    
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span><span class="n">device</span><span class="p">,</span><span class="n">sentinelSaveA</span><span class="p">,</span><span class="n">sentinelSaveB</span><span class="p">,</span><span class="n">sentinelSaveC</span><span class="p">,</span><span class="n">sentinelSaveD</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">totalA</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeA</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">totalB</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeB</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">totalC</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeC</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">totalD</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeD</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">=</span><span class="n">device</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveA</span><span class="o">=</span><span class="n">sentinelSaveA</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveB</span><span class="o">=</span><span class="n">sentinelSaveB</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveC</span><span class="o">=</span><span class="n">sentinelSaveC</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveD</span><span class="o">=</span><span class="n">sentinelSaveD</span>
        <span class="c1">#Sentinel to know if the thread stil running</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itsRunning</span><span class="o">=</span><span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch1</span><span class="o">.</span><span class="n">enableChannel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch2</span><span class="o">.</span><span class="n">enableChannel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch3</span><span class="o">.</span><span class="n">enableChannel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch4</span><span class="o">.</span><span class="n">enableChannel</span><span class="p">()</span>
        <span class="c1">#Check if the dialog was opened before</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelDialogA</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelDialogB</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelDialogC</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sentinelDialogD</span><span class="o">=</span><span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueA</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueB</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueC</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueD</span><span class="o">=</span><span class="mi">0</span>
        <span class="c1">#Sentinel to know if dialog is open</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">openDialog</span><span class="o">=</span><span class="kc">False</span>
        <span class="c1">#List of channels to change</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="o">=</span><span class="p">[]</span>
        <span class="c1">#sentinel for the starts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">totalStarts</span><span class="o">=</span><span class="mi">0</span>
        <span class="c1">#List of channels witouth measurement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="o">=</span><span class="p">[]</span>
        <span class="c1">#String with the state of the device</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentState</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
        <span class="c1">#String with NM</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentNM</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
        <span class="c1">#Sentinels to know if there is not a measurement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementA</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementB</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementC</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementD</span><span class="o">=</span><span class="mi">0</span>


        
    <span class="c1">#Main function</span>
<div class="viewcode-block" id="WorkerThreadStartStopHistogram.run"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.WorkerThreadStartStopHistogram.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes the thread&#39;s main loop to update the graph based on measurements.</span>

<span class="sd">        The function emits a signal indicating that the thread has been created. It then enters a </span>
<span class="sd">        loop that continues as long as the thread is running. Inside the loop, it calls the update </span>
<span class="sd">        method to refresh the graph and pauses for 0.5 seconds before the next iteration.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threadCreated</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">itsRunning</span><span class="p">:</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
             <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span></div>
        
    
    
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##--------Update function----------##</span>
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##---------------------------------## </span>
<div class="viewcode-block" id="WorkerThreadStartStopHistogram.update"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.WorkerThreadStartStopHistogram.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs measurements and updates the graph with the new data.</span>

<span class="sd">        The function verifies the device connection and retrieves measurements for each channel (A, B, C, D). </span>
<span class="sd">        It checks if the majority of measurements are out of range when in mode 1. If so, it emits a signal </span>
<span class="sd">        to open a dialog box asking the user if they want to change the mode. If there are no measurements, </span>
<span class="sd">        the function prioritizes the alert to change mode. Otherwise, it emits the measurement value to update </span>
<span class="sd">        the graph.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#verify the device connection</span>
        <span class="c1">#Get the measure of the device</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="c1">#Get the update of graph A</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveA</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">numberA</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch1</span><span class="o">.</span><span class="n">getNumberOfStops</span><span class="p">()):</span>
                    <span class="n">new_data1</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNewData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch1</span><span class="p">,</span><span class="s2">&quot;A&quot;</span><span class="p">,</span><span class="n">numberA</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">new_data1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        
                        <span class="c1">#Check if data is out of range</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">totalA</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">:</span>
                            <span class="n">ratioValue</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeA</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">totalA</span>
                            <span class="k">if</span> <span class="n">ratioValue</span><span class="o">&gt;</span><span class="mf">0.6</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentinelDialogA</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">openDialog</span><span class="o">=</span><span class="kc">True</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dialogSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;channel A&quot;</span><span class="p">)</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">sentinelDialogA</span><span class="o">=</span><span class="kc">True</span>
                                    <span class="c1">#Active waiting</span>
                                    <span class="k">while</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">openDialog</span><span class="p">):</span>
                                        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch1</span><span class="o">.</span><span class="n">getMode</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data1</span><span class="p">,</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeA</span><span class="o">=</span><span class="mi">0</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data1</span><span class="p">,</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data1</span><span class="p">,</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
                                <span class="k">if</span> <span class="s1">&#39;A&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
                        <span class="c1">###############################</span>
                        <span class="k">else</span><span class="p">:</span>
                        <span class="c1">#Emit data</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data1</span><span class="p">,</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementA</span><span class="o">&gt;</span><span class="mi">2</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s1">&#39;A&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementA</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
                        
                    
            
            <span class="c1">#Get the update of graph B</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveB</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">numberB</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch2</span><span class="o">.</span><span class="n">getNumberOfStops</span><span class="p">()):</span>
                    <span class="n">new_data2</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNewData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch2</span><span class="p">,</span><span class="s2">&quot;B&quot;</span><span class="p">,</span><span class="n">numberB</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">new_data2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="c1">#Check if data is out of range</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">totalB</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">:</span>
                            <span class="n">ratioValue</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeB</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">totalB</span>
                            <span class="k">if</span> <span class="n">ratioValue</span><span class="o">&gt;</span><span class="mf">0.6</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentinelDialogB</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">openDialog</span><span class="o">=</span><span class="kc">True</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dialogSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;channel B&quot;</span><span class="p">)</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">sentinelDialogB</span><span class="o">=</span><span class="kc">True</span>
                                    <span class="c1">#Active waiting</span>
                                    <span class="k">while</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">openDialog</span><span class="p">):</span>
                                        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch2</span><span class="o">.</span><span class="n">getMode</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data2</span><span class="p">,</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeB</span><span class="o">=</span><span class="mi">0</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data2</span><span class="p">,</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data2</span><span class="p">,</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>
                                <span class="k">if</span> <span class="s1">&#39;B&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
                        <span class="c1">###############################</span>
                        <span class="c1">#Emit data</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data2</span><span class="p">,</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementB</span><span class="o">&gt;</span><span class="mi">2</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s1">&#39;B&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementB</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
                            
                    



            <span class="c1">#Get the update of graph C</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveC</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">numberC</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch3</span><span class="o">.</span><span class="n">getNumberOfStops</span><span class="p">()):</span>
                    <span class="n">new_data3</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNewData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch3</span><span class="p">,</span><span class="s2">&quot;C&quot;</span><span class="p">,</span><span class="n">numberC</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">new_data3</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="c1">#Check if data is out of range</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">totalC</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">:</span>
                            <span class="n">ratioValue</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeC</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">totalC</span>
                            <span class="k">if</span> <span class="n">ratioValue</span><span class="o">&gt;</span><span class="mf">0.6</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentinelDialogC</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">openDialog</span><span class="o">=</span><span class="kc">True</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dialogSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;channel C&quot;</span><span class="p">)</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">sentinelDialogC</span><span class="o">=</span><span class="kc">True</span>
                                    <span class="c1">#Active waiting</span>
                                    <span class="k">while</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">openDialog</span><span class="p">):</span>
                                        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch3</span><span class="o">.</span><span class="n">getMode</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data3</span><span class="p">,</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeC</span><span class="o">=</span><span class="mi">0</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data3</span><span class="p">,</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data3</span><span class="p">,</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>
                                <span class="k">if</span> <span class="s1">&#39;C&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                        <span class="c1">###############################</span>
                        
                        <span class="c1">#Emit data</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data3</span><span class="p">,</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementC</span><span class="o">&gt;</span><span class="mi">2</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s1">&#39;C&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementC</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                    
                    
            
            
            <span class="c1">#Get the update of graph D</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setinelSaveD</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">numberD</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch4</span><span class="o">.</span><span class="n">getNumberOfStops</span><span class="p">()):</span>
                    <span class="n">new_data4</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNewData</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch4</span><span class="p">,</span><span class="s2">&quot;D&quot;</span><span class="p">,</span><span class="n">numberD</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">new_data4</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="c1">#Check if data is out of range</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">totalD</span><span class="o">&gt;</span><span class="mi">10</span><span class="p">:</span>
                            <span class="n">ratioValue</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeD</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">totalD</span>
                            <span class="k">if</span> <span class="n">ratioValue</span><span class="o">&gt;</span><span class="mf">0.6</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentinelDialogD</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">openDialog</span><span class="o">=</span><span class="kc">True</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dialogSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;channel D&quot;</span><span class="p">)</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">sentinelDialogD</span><span class="o">=</span><span class="kc">True</span>
                                    <span class="c1">#Active waiting</span>
                                    <span class="k">while</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">openDialog</span><span class="p">):</span>
                                        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">ch4</span><span class="o">.</span><span class="n">getMode</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data4</span><span class="p">,</span><span class="s2">&quot;D&quot;</span><span class="p">)</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeD</span><span class="o">=</span><span class="mi">0</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data4</span><span class="p">,</span><span class="s2">&quot;D&quot;</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data4</span><span class="p">,</span><span class="s2">&quot;D&quot;</span><span class="p">)</span>
                                <span class="k">if</span> <span class="s1">&#39;D&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
                                
                        <span class="c1">###############################</span>
                        <span class="c1">#Emit data</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">dataSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">new_data4</span><span class="p">,</span><span class="s2">&quot;D&quot;</span><span class="p">)</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementD</span><span class="o">&gt;</span><span class="mi">2</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;D&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s1">&#39;D&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementD</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
                    
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">totalStarts</span><span class="o">&gt;=</span><span class="mi">2</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39;Start&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Start&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">totalStarts</span><span class="o">&lt;</span><span class="mi">2</span><span class="p">)</span> <span class="ow">and</span> <span class="s1">&#39;Start&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;Start&#39;</span><span class="p">)</span>



            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">stringEmit</span><span class="o">=</span><span class="s2">&quot;Consider changing mode of the channels:&quot;</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                        <span class="n">stringEmit</span><span class="o">+=</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">stringEmit</span><span class="o">+=</span><span class="s2">&quot;, &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">currentState</span><span class="o">=</span> <span class="n">stringEmit</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorValue</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stringValue</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">currentState</span><span class="p">)</span>
            
                
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">stringEmit</span><span class="o">=</span><span class="s2">&quot;No measurements in channels: &quot;</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                        <span class="n">stringEmit</span><span class="o">+=</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> 
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">stringEmit</span><span class="o">+=</span><span class="s2">&quot;, &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> 
                <span class="bp">self</span><span class="o">.</span><span class="n">currentNM</span><span class="o">=</span><span class="n">stringEmit</span>
                <span class="n">emitStringProblems</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">currentNM</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorValue</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stringValue</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">emitStringProblems</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channelsNM</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colorValue</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stringValue</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot;Measurement running&quot;</span><span class="p">)</span>        
                
                                  
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dialogInit</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span></div>
             
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##---Begin with get measurement----##</span>
    <span class="c1">##---------------------------------##</span>
    <span class="c1">##---------------------------------##  </span>
    
<div class="viewcode-block" id="WorkerThreadStartStopHistogram.getNewData"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.WorkerThreadStartStopHistogram.getNewData">[docs]</a>    <span class="k">def</span> <span class="nf">getNewData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="p">,</span><span class="n">channelIndex</span><span class="p">,</span><span class="n">stopNumber</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs multiple measurements on the device, averages the results, and emits the corresponding data.</span>
<span class="sd">        If no data is available, it emits None. Increments the total number of measurements taken and activates sentinels</span>
<span class="sd">        to indicate whether the device is actively collecting data.</span>

<span class="sd">        :param channel: The device channel used for measurements (Channel).</span>
<span class="sd">        :param channelIndex: The index of the channel, which can be &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, or &#39;D&#39; (str).</span>
<span class="sd">        :param stopNumber: The stop number to obtain the corresponding measurement (int).</span>
<span class="sd">        :return: The average measurement in milliseconds if data is available; otherwise, returns None (float or None).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">measurements</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">measure</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">measurements</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">measurements</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">number_runs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">getNumberOfRuns</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">totalStarts</span><span class="o">+=</span><span class="n">number_runs</span>
        

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">measurements</span><span class="p">)</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">measurements</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">totalStarts</span><span class="o">=</span><span class="mi">0</span>
                
                <span class="n">number_runs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="o">.</span><span class="n">getNumberOfRuns</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s2">&quot;A&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementA</span><span class="o">+=</span><span class="mi">1</span>
                    <span class="n">index_measurement</span><span class="o">=</span><span class="mi">0</span>    
                <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s2">&quot;B&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementB</span><span class="o">+=</span><span class="mi">1</span>
                    <span class="n">index_measurement</span><span class="o">=</span><span class="n">number_runs</span>
                <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s2">&quot;C&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementC</span><span class="o">+=</span><span class="mi">1</span>
                    <span class="n">index_measurement</span><span class="o">=</span><span class="n">number_runs</span><span class="o">*</span><span class="mi">2</span>
                <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s2">&quot;D&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementD</span><span class="o">+=</span><span class="mi">1</span>
                    <span class="n">index_measurement</span><span class="o">=</span><span class="n">number_runs</span><span class="o">*</span><span class="mi">3</span>
                    
                <span class="n">total_measurement</span><span class="o">=</span><span class="mi">0</span>
                <span class="n">total_points</span><span class="o">=</span><span class="mi">0</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_runs</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">measurements</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_measurement</span><span class="p">][</span><span class="mi">3</span><span class="o">+</span><span class="n">stopNumber</span><span class="p">]</span><span class="o">!=-</span><span class="mi">1</span><span class="p">:</span>
                        <span class="n">total_measurement</span><span class="o">+=</span><span class="n">measurements</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">index_measurement</span><span class="p">][</span><span class="mi">3</span><span class="o">+</span><span class="n">stopNumber</span><span class="p">]</span>
                        <span class="n">total_points</span><span class="o">+=</span><span class="mi">1</span>
                <span class="k">if</span> <span class="n">total_points</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>    
                    <span class="k">if</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;A&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementA</span><span class="o">=</span><span class="mi">0</span>
                    <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;B&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementB</span><span class="o">=</span><span class="mi">0</span>
                    <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;C&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementC</span><span class="o">=</span><span class="mi">0</span>
                    <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;D&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">noMeasurementD</span><span class="o">=</span><span class="mi">0</span>
                    <span class="n">average_measurement</span><span class="o">=</span><span class="n">total_measurement</span><span class="o">/</span><span class="n">total_points</span>
                    <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">getMode</span><span class="p">()</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span>
                        <span class="n">miliseconds_measurement</span><span class="o">=</span><span class="n">average_measurement</span><span class="o">/</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">average_measurement</span><span class="o">&gt;</span><span class="mi">800000</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;A&#39;</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeA</span><span class="o">+=</span><span class="mi">1</span>
                            <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;B&#39;</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeB</span><span class="o">+=</span><span class="mi">1</span>
                            <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;C&#39;</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeC</span><span class="o">+=</span><span class="mi">1</span>
                            <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;D&#39;</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">outOfRangeD</span><span class="o">+=</span><span class="mi">1</span>
                        <span class="n">miliseconds_measurement</span><span class="o">=</span><span class="n">average_measurement</span><span class="o">/</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span> 
                    
                    <span class="c1">#Change the histogram range according to max Value</span>
                    <span class="k">if</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;A&#39;</span> <span class="ow">and</span> <span class="n">miliseconds_measurement</span><span class="o">&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueA</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueA</span><span class="o">=</span><span class="n">miliseconds_measurement</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">newMaxValueSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">miliseconds_measurement</span><span class="p">,</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;B&#39;</span> <span class="ow">and</span> <span class="n">miliseconds_measurement</span><span class="o">&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueB</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueB</span><span class="o">=</span><span class="n">miliseconds_measurement</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">newMaxValueSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">miliseconds_measurement</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;C&#39;</span> <span class="ow">and</span> <span class="n">miliseconds_measurement</span><span class="o">&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueC</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueC</span><span class="o">=</span><span class="n">miliseconds_measurement</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">newMaxValueSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">miliseconds_measurement</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;D&#39;</span> <span class="ow">and</span> <span class="n">miliseconds_measurement</span><span class="o">&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueD</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueD</span><span class="o">=</span><span class="n">miliseconds_measurement</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">newMaxValueSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">miliseconds_measurement</span><span class="p">,</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
                        
                    <span class="k">if</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;A&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">totalA</span><span class="o">+=</span><span class="mi">1</span>    
                    <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;B&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">totalB</span><span class="o">+=</span><span class="mi">1</span>    
                    <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;C&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">totalC</span><span class="o">+=</span><span class="mi">1</span>    
                    <span class="k">elif</span> <span class="n">channelIndex</span><span class="o">==</span><span class="s1">&#39;D&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">totalD</span><span class="o">+=</span><span class="mi">1</span>   
                    <span class="n">average_measurement</span><span class="o">=</span><span class="n">average_measurement</span><span class="o">/</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">9</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">dataPureSignal</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">average_measurement</span><span class="p">,</span><span class="n">channelIndex</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">miliseconds_measurement</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    

    <span class="c1">#Function to know if a dialog is open</span>
<div class="viewcode-block" id="WorkerThreadStartStopHistogram.dialogIsOpen"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.WorkerThreadStartStopHistogram.dialogIsOpen">[docs]</a>    <span class="k">def</span> <span class="nf">dialogIsOpen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the &#39;openDialog&#39; sentinel to False, indicating that no dialog is open.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">openDialog</span><span class="o">=</span><span class="kc">False</span> </div>
    
    <span class="c1">#Change the max Value if the mode is changed</span>
<div class="viewcode-block" id="WorkerThreadStartStopHistogram.changeMaxValue"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.WorkerThreadStartStopHistogram.changeMaxValue">[docs]</a>    <span class="k">def</span> <span class="nf">changeMaxValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="p">,</span><span class="n">valueMax</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes the maximum value for the specified channel.</span>

<span class="sd">        :param channel: The channel for which the maximum value is to be changed (str).</span>
<span class="sd">        :param valueMax: The new maximum value to be set (float).</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;A&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueA</span><span class="o">=</span><span class="n">valueMax</span>
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;B&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueB</span><span class="o">=</span><span class="n">valueMax</span>
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;C&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueC</span><span class="o">=</span><span class="n">valueMax</span>
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;D&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentMaxValueD</span><span class="o">=</span><span class="n">valueMax</span></div>

    <span class="c1">#Add to the list if the mode is not changed</span>
<div class="viewcode-block" id="WorkerThreadStartStopHistogram.addChannelWarning"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.WorkerThreadStartStopHistogram.addChannelWarning">[docs]</a>    <span class="k">def</span> <span class="nf">addChannelWarning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds the specified channel to the list of channels that need to change mode.</span>

<span class="sd">        :param channel: The channel to be added to the warning list (str).</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;A&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;B&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;C&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">channel</span><span class="o">==</span><span class="s1">&#39;D&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">channelsToChange</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">)</span></div>



<div class="viewcode-block" id="WorkerThreadStartStopHistogram.stop"><a class="viewcode-back" href="../StartStopHist.html#StartStopHist.WorkerThreadStartStopHistogram.stop">[docs]</a>    <span class="nd">@Slot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stops the measurement process and closes the thread.</span>

<span class="sd">        This method emits a signal to indicate that the thread has been stopped</span>
<span class="sd">        and sets the running flag to False.</span>

<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threadCreated</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itsRunning</span><span class="o">=</span><span class="kc">False</span></div></div>
    
        
        
        
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025,Tausand Electronics.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>